/* Theme System - CSS Variables */
:root {
    /* Light theme variables (minimalist/professional) */
    --primary: #2D3748;
    --primary-hover: #1A202C;
    --secondary: #718096;
    --accent: #4A5568;
    --warning: #D69E2E;
    --danger: #E53E3E;
    --background: #FFFFFF;
    --surface: #F7FAFC;
    --card: #FFFFFF;
    --text-primary: #1A202C;
    --text-secondary: #4A5568;
    --border: #E2E8F0;
    --shadow: rgba(0, 0, 0, 0.05);
    --overlay: rgba(0, 0, 0, 0.4);
    
    /* Gradient variables - minimalist */
    --gradient-primary: linear-gradient(135deg, var(--primary) 0%, #4A5568 100%);
    --gradient-surface: linear-gradient(135deg, var(--surface) 0%, #EDF2F7 100%);
    --gradient-rainbow: linear-gradient(90deg, #4A5568, #2D3748, #1A202C);
    
    /* Shadow variables */
    --shadow-sm: 0 1px 2px 0 var(--shadow);
    --shadow-md: 0 4px 6px -1px var(--shadow);
    --shadow-lg: 0 10px 15px -3px var(--shadow);
    --shadow-xl: 0 20px 25px -5px var(--shadow);
    
    /* Border radius */
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-full: 9999px;
    
    /* Spacing */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 12px;
    --space-lg: 16px;
    --space-xl: 24px;
    --space-2xl: 32px;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dark theme variables - minimalist */
[data-theme="dark"] {
    --primary: #E2E8F0;
    --primary-hover: #F7FAFC;
    --secondary: #718096;
    --accent: #CBD5E1;
    --warning: #D69E2E;
    --danger: #E53E3E;
    --background: #1A202C;
    --surface: #2D3748;
    --card: #2D3748;
    --text-primary: #F7FAFC;
    --text-secondary: #A0AEC0;
    --border: #4A5568;
    --shadow: rgba(0, 0, 0, 0.2);
    --overlay: rgba(0, 0, 0, 0.6);
    
    /* Dark theme gradients - minimalist */
    --gradient-primary: linear-gradient(135deg, var(--primary) 0%, #CBD5E1 100%);
    --gradient-surface: linear-gradient(135deg, var(--surface) 0%, #4A5568 100%);
    --gradient-rainbow: linear-gradient(90deg, #4A5568, #2D3748, #1A202C);
}

/* Theme toggle button styles - minimalist */
.theme-toggle {
    position: fixed;
    top: var(--space-lg);
    right: var(--space-lg);
    width: 48px;
    height: 48px;
    border: 1px solid var(--border);
    border-radius: var(--radius-full);
    background: var(--surface);
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    box-shadow: var(--shadow-md);
    transition: all var(--transition-normal);
    z-index: 1000;
}

.theme-toggle:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-xl);
}

.theme-toggle:active {
    transform: translateY(0);
}

/* Header theme toggle for app pages */
.header-theme-toggle {
    position: relative;
    top: unset;
    right: unset;
    width: 40px;
    height: 40px;
    font-size: 18px;
    margin-left: var(--space-md);
}

/* Theme transition for smooth switching */
* {
    transition: 
        background-color var(--transition-normal),
        border-color var(--transition-normal),
        color var(--transition-normal),
        box-shadow var(--transition-normal);
}

/* Apply theme variables to base elements */
body {
    background: var(--background);
    color: var(--text-primary);
    transition: background-color var(--transition-normal), color var(--transition-normal);
}

/* Override specific gradient backgrounds for theming */
.app-container {
    background: var(--background) !important;
    min-height: 100vh;
}

.login-container {
    background: var(--background) !important;
}

/* Ensure proper theming for cards and surfaces */
.login-content,
.dashboard-content,
.app-header,
.session-card,
.feature-card,
.user-details,
.clip-form,
.time-group,
.option-group,
.quick-duration-buttons,
.clip-item,
.modal-content,
.modal-header {
    background: var(--card) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

/* Update text colors */
h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
}

p, span, label {
    color: var(--text-secondary) !important;
}

/* Update input styles */
.time-input,
.form-select {
    background: var(--surface) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

.time-input:focus,
.form-select:focus {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 3px rgba(45, 55, 72, 0.1) !important;
}

/* Update button styles to use theme variables - minimalist */
.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border-color: #667eea !important;
    color: white !important;
}

.btn-outline-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

[data-theme="dark"] .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border-color: #667eea !important;
    color: white !important;
}

.btn-secondary {
    background: var(--surface) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

.btn-danger {
    background: var(--danger) !important;
    border-color: var(--danger) !important;
    color: white !important;
}

/* Update alert styles */
.alert-error {
    background: rgba(229, 62, 62, 0.1) !important;
    color: var(--danger) !important;
    border-color: rgba(229, 62, 62, 0.2) !important;
}

.alert-success {
    background: rgba(74, 85, 104, 0.1) !important;
    color: var(--accent) !important;
    border-color: rgba(74, 85, 104, 0.2) !important;
}

/* Progress bar theming - minimalist */
.progress-bar {
    background: var(--border) !important;
}

.progress-fill {
    background: var(--primary) !important;
}

/* State indicators */
.state-playing {
    background: rgba(74, 85, 104, 0.1) !important;
    color: var(--accent) !important;
    border-color: rgba(74, 85, 104, 0.2) !important;
}

.state-paused {
    background: rgba(214, 158, 46, 0.1) !important;
    color: var(--warning) !important;
    border-color: rgba(214, 158, 46, 0.2) !important;
}

.state-stopped {
    background: rgba(229, 62, 62, 0.1) !important;
    color: var(--danger) !important;
    border-color: rgba(229, 62, 62, 0.2) !important;
}

/* Timeline theming */
#timeline-canvas {
    background: var(--surface) !important;
}

.timeline-container,
.timeline-navigation {
    background: var(--card) !important;
    border-color: var(--border) !important;
}

/* Tab navigation theming - minimalist */
.tab-navigation {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

.tab-button {
    color: var(--text-secondary) !important;
}

.tab-button:hover {
    color: var(--primary) !important;
    background: var(--background) !important;
}

.tab-button.active {
    background: var(--primary) !important;
    color: white !important;
}

[data-theme="dark"] .tab-button.active {
    background: var(--primary) !important;
    color: black !important;
}

.tab-button.active .tab-text,
.tab-button.active .tab-icon {
    color: white !important;
}

[data-theme="dark"] .tab-button.active .tab-text,
[data-theme="dark"] .tab-button.active .tab-icon {
    color: black !important;
}

/* Section headers - minimalist */
.section-header {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

/* Responsive adjustments for mobile */
@media (max-width: 768px) {
    .theme-toggle {
        top: 4px; /* Position slightly higher than header padding */
        right: var(--space-md);
        width: 44px;
        height: 44px;
        font-size: 18px;
    }
}

/* Extra small screens - adjust theme button position */
@media (max-width: 480px) {
    .theme-toggle {
        top: 2px; /* Position slightly higher than header padding */
        right: 10px;
        width: 40px;
        height: 40px;
        font-size: 16px;
    }
}

/* Dark theme specific overrides */
[data-theme="dark"] .spinner {
    border-color: var(--border) !important;
    border-top-color: var(--primary) !important;
}

[data-theme="dark"] .no-session,
[data-theme="dark"] .no-clips {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .clip-meta span {
    background: var(--surface) !important;
    color: var(--text-secondary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .edited-video-item {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .edited-videos-list {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

/* Dark theme specific contrast fixes */
[data-theme="dark"] h1,
[data-theme="dark"] h2,
[data-theme="dark"] h3,
[data-theme="dark"] h4,
[data-theme="dark"] h5,
[data-theme="dark"] h6 {
    color: var(--text-primary) !important;
}

[data-theme="dark"] p,
[data-theme="dark"] span,
[data-theme="dark"] label,
[data-theme="dark"] div {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .text-muted,
[data-theme="dark"] .meta,
[data-theme="dark"] .description,
[data-theme="dark"] .secondary-text {
    color: var(--text-secondary) !important;
}

/* Ensure buttons have proper contrast */
[data-theme="dark"] .btn {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

[data-theme="dark"] .btn-secondary {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Ensure form elements are visible */
[data-theme="dark"] input,
[data-theme="dark"] select,
[data-theme="dark"] textarea {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] input::placeholder,
[data-theme="dark"] textarea::placeholder {
    color: var(--text-secondary) !important;
}

/* Fix any remaining white backgrounds */
[data-theme="dark"] .modal-content,
[data-theme="dark"] .card,
[data-theme="dark"] .session-card,
[data-theme="dark"] .clip-item,
[data-theme="dark"] .feature-card {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

/* Fix clip item containers specifically */
[data-theme="dark"] .clip-item {
    background: var(--card) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .clips-list {
    background: var(--background) !important;
}

/* Fix bulk select mode styling */
[data-theme="dark"] .bulk-select-mode .clip-item.selectable {
    border-color: var(--border) !important;
}

[data-theme="dark"] .bulk-select-mode .clip-item.selectable:hover {
    border-color: var(--primary) !important;
    box-shadow: 0 12px 40px rgba(45, 55, 72, 0.2) !important;
}

[data-theme="dark"] .bulk-select-mode .clip-item.selected {
    border-color: var(--accent) !important;
    box-shadow: 0 8px 32px rgba(74, 85, 104, 0.2) !important;
}

/* Fix all clip content elements */
[data-theme="dark"] .clip-info {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .clip-title {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .clip-show {
    color: var(--primary) !important;
    background: rgba(45, 55, 72, 0.1) !important;
}

[data-theme="dark"] .clip-meta {
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .clip-meta span {
    background: var(--surface) !important;
    color: var(--text-secondary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .clip-actions {
    background: var(--card) !important;
}

/* Fix creation status messages */
[data-theme="dark"] .creation-status {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .creation-status.loading {
    background: rgba(74, 85, 104, 0.2) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .creation-status.success {
    background: rgba(74, 85, 104, 0.2) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .creation-status.error {
    background: rgba(229, 62, 62, 0.1) !important;
    color: var(--danger) !important;
    border-color: rgba(229, 62, 62, 0.2) !important;
}

[data-theme="dark"] .creation-status.info {
    background: rgba(74, 85, 104, 0.2) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Fix alert modal and other alerts */
[data-theme="dark"] .alert-modal {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .alert-modal .modal-content {
    background: var(--card) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Fix progress text elements */
[data-theme="dark"] .progress-text,
[data-theme="dark"] .progress-text-compact,
[data-theme="dark"] #progress-text-modal {
    color: var(--text-primary) !important;
}

/* Fix preview selector components */
[data-theme="dark"] .clip-preview {
    background: var(--card) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .preview-section {
    background: transparent !important;
    color: var(--text-primary) !important;
}

/* Fix clip creation form containers */
[data-theme="dark"] .clip-creation-section {
    background: var(--background) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .clip-form {
    background: var(--background) !important;
    color: var(--text-primary) !important;
}

/* Fix other form containers that might affect the preview section */
[data-theme="dark"] .time-inputs,
[data-theme="dark"] .time-group,
[data-theme="dark"] .clip-options,
[data-theme="dark"] .option-group,
[data-theme="dark"] .quick-duration-buttons {
    background: var(--background) !important;
    color: var(--text-primary) !important;
}

/* Ensure the preview selection button area has no weird backgrounds */
[data-theme="dark"] .preview-section .btn,
[data-theme="dark"] .preview-section .btn-outline-primary {
    background: transparent !important;
    color: var(--primary) !important;
    border-color: var(--primary) !important;
}

/* Login page specific theming */
.login-container {
    background: var(--background) !important;
}

.login-content {
    background: var(--card) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

.login-header h1 {
    color: var(--text-primary) !important;
}

.login-header p {
    color: var(--text-secondary) !important;
}

.login-method {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

.login-method-header h3 {
    color: var(--text-primary) !important;
}

.login-method-header p {
    color: var(--text-secondary) !important;
}

.login-footer p {
    color: var(--text-secondary) !important;
}

/* Login button specific styling for better contrast */
.login-button-container .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

[data-theme="dark"] .login-button-container .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

/* Checkbox styling for login page */
.remember-me-container {
    color: var(--text-primary) !important;
}

.checkbox-label {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .screenshot-preview {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .preview-frame {
    background: var(--surface) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .preview-frame h4 {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .preview-loading {
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .loading-spinner {
    border-color: var(--border) !important;
    border-top-color: var(--primary) !important;
}

[data-theme="dark"] .frame-timestamp {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .preview-error {
    background: rgba(229, 62, 62, 0.1) !important;
    color: var(--danger) !important;
    border-color: rgba(229, 62, 62, 0.2) !important;
}

/* Fix clip preview section in success modal */
[data-theme="dark"] .clip-preview-section {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

/* Fix clip success modal components */
[data-theme="dark"] .modal-content.clip-success-modal {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .clip-success-content {
    background: var(--card) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .success-icon {
    color: var(--accent) !important;
}

[data-theme="dark"] .success-message {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .success-video-preview {
    background: var(--background) !important;
}

[data-theme="dark"] .clip-details {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .detail-item {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .detail-label {
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .detail-value {
    color: var(--text-primary) !important;
}

/* Fix subclip modal (has same classes) */
[data-theme="dark"] #subclip-success-modal-editor {
    background: var(--overlay) !important;
}

[data-theme="dark"] #subclip-success-modal-editor .modal-content {
    background: var(--card) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Fix bulk actions area */
[data-theme="dark"] .bulk-actions {
    background: var(--surface) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .selection-count {
    color: var(--text-primary) !important;
}

/* Ensure all buttons in bulk actions have proper styling */
[data-theme="dark"] .bulk-actions .btn {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .bulk-actions .btn-danger {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .bulk-actions .btn-outline-secondary {
    background: transparent !important;
    color: var(--text-secondary) !important;
    border-color: var(--border) !important;
}

/* Ensure dropdowns and selects are visible */
[data-theme="dark"] .dropdown-menu,
[data-theme="dark"] .select-dropdown {
    background: var(--surface) !important;
    border-color: var(--border) !important;
    color: var(--text-primary) !important;
}

/* Fix outline button styles in dark theme */
[data-theme="dark"] .btn-outline-primary {
    background: transparent !important;
    color: var(--primary) !important;
    border-color: var(--primary) !important;
}

[data-theme="dark"] .btn-outline-primary:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

[data-theme="dark"] .btn-outline-secondary {
    background: transparent !important;
    color: var(--text-secondary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .btn-outline-secondary:hover {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .btn-outline-danger {
    background: transparent !important;
    color: var(--danger) !important;
    border-color: var(--danger) !important;
}

[data-theme="dark"] .btn-outline-danger:hover {
    background: var(--danger) !important;
    color: white !important;
    border-color: var(--danger) !important;
}

/* Fix small button variants */
[data-theme="dark"] .btn-small {
    background: transparent !important;
    color: var(--text-secondary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .btn-small:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

/* Fix clip action buttons specifically - all same neutral style */
[data-theme="dark"] .clip-actions .btn,
[data-theme="dark"] .clip-item .btn,
[data-theme="dark"] .clips-list .btn {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .clip-actions .btn-primary,
[data-theme="dark"] .clip-item .btn-primary,
[data-theme="dark"] .clips-list .btn-primary {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .clip-actions .btn-secondary,
[data-theme="dark"] .clip-item .btn-secondary,
[data-theme="dark"] .clips-list .btn-secondary {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .clip-actions .btn-danger,
[data-theme="dark"] .clip-item .btn-danger,
[data-theme="dark"] .clips-list .btn-danger {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Smooth theme transition for all elements */
*,
*::before,
*::after {
    transition: 
        background-color var(--transition-normal),
        border-color var(--transition-normal),
        color var(--transition-normal),
        box-shadow var(--transition-normal),
        opacity var(--transition-normal);
}

/* Aggressive overrides to ensure theme colors take precedence */
.app-container,
.login-container,
.dashboard-content,
.main-content,
.session-card,
.clip-item,
.clip-creation-section,
.clips-gallery-section,
.tab-navigation,
.section-header,
.session-header,
.user-details,
.feature-card {
    background: var(--background) !important;
    color: var(--text-primary) !important;
}

/* Force all cards and surfaces to use theme colors */
.card,
.modal-content,
.modal-header,
.modal-body,
.progress-container,
.time-group,
.option-group,
.clip-form,
.clips-list {
    background: var(--card) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Force all text elements to use theme colors */
h1, h2, h3, h4, h5, h6,
p, span, label, div {
    color: var(--text-primary) !important;
}

/* Force secondary text */
.text-muted,
.meta,
.description,
.secondary-text {
    color: var(--text-secondary) !important;
}

/* Override any hardcoded button colors */
.btn {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

[data-theme="dark"] .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-color: #667eea !important;
}

.btn-secondary {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Make all clip action buttons consistent in both themes */
.clip-actions .btn,
.clip-item .btn,
.clips-list .btn {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

.clip-actions .btn-primary,
.clip-item .btn-primary,
.clips-list .btn-primary,
.clip-actions .btn-secondary,
.clip-item .btn-secondary,
.clips-list .btn-secondary,
.clip-actions .btn-danger,
.clip-item .btn-danger,
.clips-list .btn-danger {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

/* Override hardcoded form elements */
input, select, textarea {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

input:focus, select:focus, textarea:focus {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 2px rgba(45, 55, 72, 0.1) !important;
}

/* Override hardcoded alert colors */
.alert {
    background: var(--surface) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

.alert-success {
    background: rgba(74, 85, 104, 0.1) !important;
    color: var(--accent) !important;
    border-color: rgba(74, 85, 104, 0.2) !important;
}

.alert-error,
.alert-danger {
    background: rgba(229, 62, 62, 0.1) !important;
    color: var(--danger) !important;
    border-color: rgba(229, 62, 62, 0.2) !important;
}

/* Override progress bars */
.progress {
    background: var(--border) !important;
}

.progress-bar {
    background: #e9ecef !important;
    height: 8px !important;
    border-radius: 4px !important;
}

.progress-fill {
    background: #007bff !important;
    height: 100% !important;
}

/* Override loading spinners */
.spinner {
    border-color: var(--border) !important;
    border-top-color: var(--primary) !important;
}

/* Remove any colorful gradients */
.gradient-rainbow,
.rainbow-gradient {
    background: var(--border) !important;
}

/* Override timeline elements */
.timeline-container,
.timeline-navigation,
#timeline-canvas {
    background: var(--surface) !important;
    border-color: var(--border) !important;
}

/* Override any remaining blue colors */
[style*="background: #007bff"],
[style*="background: #3B82F6"],
[style*="color: #007bff"],
[style*="color: #3B82F6"] {
    background: var(--primary) !important;
    color: white !important;
}

[data-theme="dark"] [style*="background: #007bff"],
[data-theme="dark"] [style*="background: #3B82F6"],
[data-theme="dark"] [style*="color: #007bff"],
[data-theme="dark"] [style*="color: #3B82F6"] {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
}

/* Preserve certain gradients that look good in both themes */
.gradient-rainbow {
    background: var(--gradient-rainbow) !important;
}

/* System preference detection - minimalist */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        --primary: #E2E8F0;
        --primary-hover: #F7FAFC;
        --secondary: #718096;
        --accent: #CBD5E1;
        --warning: #D69E2E;
        --danger: #E53E3E;
        --background: #1A202C;
        --surface: #2D3748;
        --card: #2D3748;
        --text-primary: #F7FAFC;
        --text-secondary: #A0AEC0;
        --border: #4A5568;
        --shadow: rgba(0, 0, 0, 0.2);
        --overlay: rgba(0, 0, 0, 0.6);
        --gradient-primary: linear-gradient(135deg, var(--primary) 0%, #CBD5E1 100%);
        --gradient-surface: linear-gradient(135deg, var(--surface) 0%, #4A5568 100%);
        --gradient-rainbow: linear-gradient(90deg, #4A5568, #2D3748, #1A202C);
    }
}